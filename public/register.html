<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="mystyle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
</head>
</head>
<body>
    <header><h1>Assignment3</h1></header>
    
    <nav>
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="stays.html">Stays</a></li>
            <li><a href="flights.html">Flights</a></li>
            <li><a href="contact.html">Contact Us</a></li>
            <li><a href="cart.html">Cart</a></li>
            <li><a href="account.html">Account</a></li>
            <li><a href="register.html">Register</a></li>
            <li><a href="login.html">Login</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <aside>
            <h1 id="time"></h1>
            <p id="date"></p><br>
            <label for="font-size">Choose Font Size:</label>
            <select id="font-size">
                <option value="16px">Default</option>
                <option value="18px">18px</option>
                <option value="20px">20px</option>
                <option value="22px">22px</option>
                <option value="24px">24px</option>
            </select><br><br>
            <label for="bg-color">Choose Background:</label>
            <select id="bg-color">
                <option value="">Default</option>
                <option value="green">Green</option>
                <option value="#AA336A">Pink</option>
                <option value="#38B0DE">Blue</option>
                <option value="orange">Orange</option>
            </select>
            <script src="script.js"></script>
        </aside>
        
        <main>
            <h2>Register</h2><br>
            <form id="register-form">
                <input type="text" id="first-name" name="first-name" placeholder="First Name" required><br><br>
                <input type="text" id="last-name" name="last-name" placeholder="Last Name" required><br><br>
                <input type="text" id="phone-no" name="phone-no" placeholder="Phone" required><br><br>
                <input type="text" id="dob" name="dob" placeholder="Date of Birth" required><br><br>
                <label for="gender"> Select your gender (Optional): </label><br>
                    <input type="radio" id="male" name="gender" value="male">
                    <label for="male">Male</label><br>
                    <input type="radio" id="female" name="gender" value="female">
                    <label for="female">Female</label><br>
                    <input type="radio" id="other" name="gender" value="other">
                    <label for="other">Other</label><br><br>
                <input type="text" id="email" name="email" placeholder="Email" required><br><br>
                <input type="password" id="pwd" name="pwd" placeholder="Password" required><br><br>
                <input type="password" id="confirm-pwd" name="confirm-pwd" placeholder="Confirm Password" required><br><br>
                <input type="submit" value="Register"><br><br>    
            </form>
            <p>Already have an account? <u><a href="login.html">Login</a></u></p>
        </main>
    </div>
    
    <footer>
        <h3>Om Hirpara: OMH200000</h3>
        <h3>Rohit Ramarathinam: RXR200060</h3>
        <h3>Pramith Prasanna: PXP200035</h3>
    </footer>
</body>
</html>

<script>
    document.getElementById('register-form').addEventListener('submit', function(event) {
        const ADMIN_PHONE_NO = "222-222-2222";

        const fname = document.getElementById("first-name").value;
        const lname = document.getElementById("last-name").value;
        const dob = document.getElementById("dob").value;
        const gender = document.getElementById("gender").value;
        const phoneNo = document.getElementById("phone-no").value;
        const email = document.getElementById("email").value;
        const pwd = document.getElementById("pwd").value;
        const cpwd = document.getElementById("confirm-pwd").value;

        const phoneRegex = /^\d{3}-\d{3}-\d{4}$/;
        const pwdRegex = /.{8}/;
        const emailRegex = /[a-zA-Z0-9]+\@[a-zA-Z]+\.com$/;
        const dobRegex = /\d{4}-\d{2}-\d{2}$/;

        if (!phoneRegex.test(phoneNo)) {
            alert('Phone number should be formatted ddd-ddd-dddd.');
            event.preventDefault();
            return;
        }

        if (phoneNo === ADMIN_PHONE_NO) {
            alert('Cannot enter an admin phone number.');
            event.preventDefault();
            return;
        }

        // uniqueness of phone no here, requires db setup

        if (!pwdRegex.test(pwd)) {
            alert('Password must be at least 8 characters in length.');
            event.preventDefault();
            return;
        }

        if (pwd !== cpwd) {
            alert("Entered passwords do not match.");
            event.preventDefault();
            return;
        }

        if (!emailRegex.test(email)) {
            alert("Email must contain @ and .com");
            event.preventDefault();
            return;
        }

        if (!dobRegex.test(dob)) {
            alert("Date must be in yyyy-mm-dd format. 4 digits for year, 2 digits for month and 2 digits for day.");
            event.preventDefault();
            return;
        }

        let _dob = new Date(dob);
        if (_dob.toISOString().substring(0, 10) !== dob) {
            alert("Invalid date entered.");
            event.preventDefault();
            return;
        }


    });
</script>